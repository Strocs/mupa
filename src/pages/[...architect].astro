---
import { nameToPath } from "@utils/nameToPath";
import { LEAD_ARCHITECTS } from "@data/lead-architects";
import Layout from "@layouts/Layout.astro";
import Header from "@components/Header.astro";
import Paragraph from "@components/Paragraph.astro";
import Footer from "@components/Footer.astro";
import { Vimeo } from "astro-embed";
import { Image } from "astro:assets";
import { getPhotos } from "@utils/getPhotos";

export function getStaticPaths() {
  return LEAD_ARCHITECTS.map((architect) => {
    return {
      params: { architect: nameToPath({ name: architect.short_name }) },
      props: architect,
    };
  });
}

const {
  id,
  name,
  short_name,
  birth_date,
  birth_place,
  university,
  description,
  quote,
  color,
  assets,
  videoId,
} = Astro.props;

const gallery = await getPhotos(assets);
---

<Layout title={name}>
  <Header />
  <main class="flex flex-col items-start h-full w-full gap-10 my-10">
    <h1
      class="text-[3.5rem] max-w-xl leading-none font-black text-dark-grey font-source-code"
      transition:name=`name-${id}`
    >
      {name}
    </h1>
    <section
      class="w-full flex gap-4 justify-between relative font-light text-primary"
    >
      <article class="max-w-lg h-full flex flex-col gap-4">
        <ul>
          <li>
            <h3><strong>Fecha de nacimiento:</strong> {" "}{birth_date}</h3>
          </li>
          <li>
            <h3><strong>Lugar de nacimiento:</strong> {" "}{birth_place}</h3>
          </li>
          <li>
            <h3>
              <strong>Estudios de Arquitectura:</strong>
              {" "}{university}
            </h3>
          </li>
        </ul>
        <h3 class="text-2xl font-bold">Trayectoria</h3>
        <Paragraph description={description} />
        <q class="italic leading-tight font-source-code font-normal text-sm">
          {quote}
        </q>
        <h3 class="text-2xl font-bold">Documentación</h3>
        <ul class="flex gap-4 flex-wrap">
          {
            gallery.map((photo) => (
              <li class="w-32 h-32 bg-light-grey rounded-md overflow-hidden">
                <Image
                  src={photo}
                  alt="Imágenes de ..."
                  class="object-cover"
                  width={1080}
                />
              </li>
            ))
          }
        </ul>
      </article>
      <section
        class="aspect-video overflow-hidden object-cover rounded-xl w-full max-w-4xl h-fit bg-light-grey flex-shrink-0 sticky right-0 top-20"
      >
        <Vimeo id={videoId} params={`color=${color.slice(1)}`} />
      </section>
    </section>
  </main>
  <Footer />
</Layout>
